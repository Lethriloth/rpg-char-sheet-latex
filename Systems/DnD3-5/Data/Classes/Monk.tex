\def\MonkBAB{a}
\def\MonkFort{g}
\def\MonkRef{g}
\def\MonkWill{g}
\NewCounter{MonkSkillRanksPerLevelCount}
\SetCounter{MonkSkillRanksPerLevelCount}{4}
\NewCounter{MonkHitDieSize}
\SetCounter{MonkHitDieSize}{8}
\edef\MonkClassSkillsList{}
\forcsvlist{\listadd{\MonkClassSkillsList}}{Balance, Climb, Concentration, Craft, Diplomacy, EscapeArtist, Hide, Jump, KnowledgeArcana, KnowledgeReligion, Listen, MoveSilently, Perform, Profession, SenseMotive, Spot, Swim, Tumble}
\newcommand{\AddMonkClassFeatures}[1]{
		\AddClassFeature{\ifthenelse{#1 > 10}{Greater }Flurry of Blows}
			\NewCounter{charFlurryOfBlowsPenaltyCount}\SetCounter{charFlurryOfBlowsPenaltyCount}{-2}
			\NewCounter{charFlurryOfBlowsAttacksCount}\stepCounter{charFlurryOfBlowsAttacksCount}
%			\AddAutoWeapon[\value{charFlurryOfBlowsAttacksCount}]{Flurry of Blows}{\value{charFlurryOfBlowsPenaltyCount}}{\charUnarmedStrikeDamage + \arabic{charStrModCount}}{20}{B}{melee}{}{str}
		\AddClassFeature{Monk Bonus Feat\ifthenelse{#1 > 1}{$\times \ifthenelse{#1 > 5}{3}{2}$}{}}
		\AddToCounter{charBonusFeatsCount}{2}
			\newcommand{\charUnarmedStrikeDamage}{
				\ifthenelse{\equal{\charSize}{Small}}{%
					\ifthenelse{#1 > 15}{2d\DoMath{6 + ((#1 - 16)/ 4) * 2}}{1d\DoMath{4 + (#1 / 4) * 2}}%
				}{%
				\ifthenelse{\equal{\charSize}{Medium}}{%
					\ifthenelse{#1 > 11}{2d\DoMath{6 + ((#1 - 12)/ 4) * 2}}{1d\DoMath{6 + (#1 / 4) * 2}}%
				}{%
				\ifthenelse{\equal{\charSize}{Large}}{%
					\ifthenelse{#1 > 3}{%
						\ifthenelse{#1 > 11}{%
							\ifthenelse{#1 > 19}{4d8}{%
							3d\DoMath{6 + ((#1 - 12)/ 4) * 2}}%
						}{%
							2d\DoMath{6 + ((#1 - 4)/ 4) * 2}%
						}%
					}{%
						1d8%
					}%
				}{}}{}}{}
			}
		\AddClassFeature{Unarmed Strike \charUnarmedStrikeDamage}
			\AddFeat*{Improved Unarmed Strike}
		\AddClassFeature{Monk AC Bonus}
			\appto\Initialize{
				\ifthenelse{\equal{\charArmorType}{}}{
					\MiscBonus{AC}{#1 / 5 + \value{charWisModCount}}
					\MiscBonus{TouchAC}{#1 / 5 + \value{charWisModCount}}
					\MiscBonus{FlatFootedAC}{#1 / 5 + \value{charWisModCount}}
				}{}
			}
	\ifthenelse{#1 > 1}{
		\AddClassFeature{\ifthenelse{#1 > 8}{Improved }{}Evasion}
		\ifthenelse{#1 > 8}{\AddSpecialDefense{Improved Evasion}}{\AddSpecialDefense{Evasion}}
		\stepCounter{charBonusFeatsCount}
	\ifthenelse{#1 > 2}{
		\AddClassFeature{Still Mind}\AddConditionalDefMod{+2 on saves vs. Enchantment}
		\EnhancementBonus{Speed}{#1 / 3 * 10}
	\ifthenelse{#1 > 3}{
		\AddClassFeature{Ki Strike (magic\ifthenelse{#1 > 9}{%
			, lawful%
			\ifthenelse{#1 > 15}{, adamantine}{}%
			}{})
		}
		\AddClassFeature{Slow Fall \ifthenelse{#1 < 20}{\DoMath{#1 / 2}0 ft.}{any distance}}
	\ifthenelse{#1 > 4}{
		\AddClassFeature{Purity of Body}\AddImmunity{Disease}
		\stepCounter{charFlurryOfBlowsPenaltyCount}
	\ifthenelse{#1 > 5}{
		\stepCounter{charBonusFeatsCount}
	\ifthenelse{#1 > 6}{
		\AddLimitedUse{Wholeness of Body (hit points)}{\DoMath{#1 * 2}}
	\ifthenelse{#1 > 8}{
		\stepCounter{charFlurryOfBlowsPenaltyCount}
	\ifthenelse{#1 > 10}{
		\stepCounter{charFlurryOfBlowsAttacksCount}
		\AddClassFeature{Diamond Body}
			\AddImmunity{poison}
	\ifthenelse{#1 > 11}{
		\AddLimitedUse{Abundant Step (\DoMath{(#1 / 2) * 40 + 400} ft.)}{1}
	\ifthenelse{#1 > 12}{
		\AddClassFeature{Diamond Soul}
			\AddSpellResistance{#1 + 10}
	\ifthenelse{#1 > 14}{
		\AddLimitedUse{Quivering Palm (DC \DoMath{10 + #1 / 2 + \value{charWisModCount}}; (1/week))}{1}
	\ifthenelse{#1 > 16}{
		\AddClassFeature{Timeless Body}
		\AddClassFeature{Tongue of the Sun and Moon}\listadd{\charLanguagesList}{Can speak with any living creature}
	\ifthenelse{#1 > 18}{
		\AddLimitedUse{Empty Body (rounds)}{#1}
	\ifthenelse{#1 > 19}{
		\AddClassFeature{Perfect Self}\AddDR{magic}{10}
	}{}
}{}
}{}
}{}
}{}
}{}
}{}
}{}
}{}
}{}
}{}
}{}
}{}
}{}
}