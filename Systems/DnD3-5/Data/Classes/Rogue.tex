\def\RogueBAB{a}
\def\RogueFort{p}
\def\RogueRef{g}
\def\RogueWill{p}
\NewCounter{RogueSkillRanksPerLevelCount}
\SetCounter{RogueSkillRanksPerLevelCount}{8}
\NewCounter{RogueHitDieSize}
\SetCounter{RogueHitDieSize}{6}
\edef\RogueClassSkillsList{}
\forcsvlist{\listadd{\RogueClassSkillsList}}{Appraise, Balance, Bluff, Climb, Craft, DecipherScript, Diplomacy, DisableDevice, Disguise, EscapeArtist, Forgery, GatherInformation, Hide, Intimidate, Jump, KnowledgeLocal, Listen, MoveSilently, OpenLock, Perform, Profession, Search, SenseMotive, SleightOfHand, Spot, Swim, Tumble, UseMagicDevice, UseRope}
\newcommand{\AddRogueClassFeatures}[1]{
	\AddClassFeature{Sneak Attack +\DoMath{(#1 + 1)/2}d6}
	\AddClassFeature{Trapfinding}
	\edef\charRogueSpecialAbilitiesList{}
	\edef\charSkillMasteryList{}
	\NewCounter{charRogueSpecialAbilitiesCount}
	\ifthenelse{#1 > 1}{
		\AddClassFeature{Evasion}
			\ifinlist{Improved Evasion}{\charRogueSpecialAbilitiesList}{
				\AddSpecialDefense{Improved Evasion}
			}{
				\AddSpecialDefense{Evasion}
			}
	\ifthenelse{#1 > 2}{
		\AddClassFeature{Trap Sense +\DoMath{#1 / 3}}
			\AddConditionalDefMod{+\DoMath{#1 / 3} to Reflex and AC vs. traps}
	\ifthenelse{#1 > 3}{
		\AddClassFeature{\ifthenelse{#1 > 7}{Improved }{}Uncanny Dodge}
			\ifthenelse{#1 > 7}{\AddSpecialDefense{Improved Uncanny Dodge}}{\addSpecialDefense{Uncanny Dodge}}
	\ifthenelse{#1 > 9}{
		\AddToCounter{charRogueSpecialAbilitiesCount}{(#1 - 7) / 3}
		\AddClassFeature{Rogue Special Abilities\forlistloop{\\~~~~}{\charRogueSpecialAbilitiesList}}
		\NewDocumentCommand{\AddRogueSpecialAbility}{m}{
			\listinsert{\charRogueSpecialAbilitiesList}{##1}
			\AddToCounter{charRogueSpecialAbilitiesCount}{-1}
		}
		\gappto{\RunChecks}{%
			%%CHECK ROGUE SPECIAL ABILITIES
			\ifthenelse{\value{charRogueSpecialAbilitiesCount} < 0}{
				\AddWarning{\DoMath{-\value{charRogueSpecialAbilitiesCount}} too many Rogue special abilities}
			}{
			\ifthenelse{\value{charRogueSpecialAbilitiesCount} > 0}{
				\AddWarning{Choose \arabic{charRogueSpecialAbilitiesCount} more Rogue special abilities}
			}{}}
		}
	}{}}{}}{}}{}
}